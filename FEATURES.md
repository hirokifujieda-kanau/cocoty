# 🎯 Cocoty - コミュニティプラットフォーム機能一覧

## 📅 最終更新: 2025年10月24日

---

## 🏗️ コア機能

### 1. **プロフィールページ** 👤
- **5つのデザインパターン** - Instagram風、カード型、ダーク、グラデーション、ミニマル
- **自分/他人視点の切り替え** - 自分のプロフィール vs 訪問者視点
- **プレビューモード** - 訪問者からの見え方を確認
- **カバー写真 & アバター** - 大きく目立つデザイン
- **MBTI診断結果表示** - ENFP, INTJ等の表示

**ファイル**: `src/components/profile/ProfilePage.tsx`

---

### 2. **ソーシャル機能（Phase 1-3）** 🤝

#### Phase 1: 基本機能
- ✅ **自分/他人の判定ロジック** - URLパラメータで切り替え
- ✅ **編集/共有ボタンの出し分け** - 自分視点と他人視点で異なるUI
- ✅ **ウェルカムメッセージ** - fade-inアニメーション付き
- ✅ **友達追加ボタン** - 3ステート管理（未フォロー/承認待ち/友達）
- ✅ **共有ボタン** - URLコピー、Twitter/Facebook共有

#### Phase 2: 体験向上
- ✅ **プレビューモード** - 他人視点のUIを確認
- ✅ **プライバシー設定** - 6項目×3段階（公開/友達のみ/自分のみ）
- ✅ **メッセージボタン** - 友達関係の場合のみ表示

#### Phase 3: 高度な機能
- ✅ **表示カスタマイズ** - 各項目の表示/非表示を切り替え
- ✅ **閲覧統計** - 今週の訪問者、累計閲覧数、最近の訪問者リスト
- ✅ **共通の友達表示** - ウェルカムメッセージ内に表示
- ✅ **カスタムURL（基本機能）** - ステート管理実装済み

---

### 3. **メッセージング（Phase 4）** 💬
- ✅ **1対1のダイレクトメッセージ** - リアルタイム風チャット
- ✅ **メッセージ履歴** - 会話の保存と表示
- ✅ **既読/未読管理** - 既読マーク、未読カウント
- ✅ **新着通知バッジ** - 未読メッセージ数の表示
- ✅ **画像添付機能** - 画像のアップロードと表示
- ✅ **会話検索** - ユーザー名で検索
- ✅ **オンラインステータス** - リアルタイム表示

**ファイル**: `src/components/messaging/DirectMessage.tsx`

---

### 4. **友達リスト管理（Phase 4）** 👥
- ✅ **友達一覧ページ** - 友達/リクエスト/おすすめの3タブ
- ✅ **フォロワー/フォロー中の表示** - 相互フォロー状態の可視化
- ✅ **友達申請の承認/拒否UI** - ワンクリック操作
- ✅ **検索・フィルタリング** - 名前、bio、診断結果で検索
- ✅ **友達の削除機能** - アクションメニューから削除
- ✅ **ブロック機能** - ユーザーをブロック
- ✅ **共通の友達表示** - 共通の友達の人数と表示
- ✅ **おすすめユーザー** - 共通の友達が多いユーザーを提案

**ファイル**: `src/components/friends/FriendsList.tsx`

---

### 5. **通知センター（Phase 4）** 🔔
- ✅ **5種類の通知** - 友達リクエスト、メッセージ、プロフィール訪問、いいね、コメント
- ✅ **通知の既読管理** - 既読/未読ステータス
- ✅ **すべて既読にする機能** - 一括既読化
- ✅ **未読フィルター** - すべて/未読の切り替え
- ✅ **通知の削除** - 個別削除とすべて削除
- ✅ **通知設定画面** - 種類別ON/OFF、メール通知、プッシュ通知
- ✅ **通知からの直接遷移** - アクションURLで該当ページへ

**ファイル**: `src/components/notifications/NotificationCenter.tsx`

---

### 6. **コメント/いいね機能（Phase 4）** ❤️💬
- ✅ **投稿写真へのコメント** - テキストコメント機能
- ✅ **コメントスレッド表示** - 時系列で表示
- ✅ **コメントへのいいね** - 各コメントにいいね可能
- ✅ **写真へのいいね** - ハートアニメーション
- ✅ **リアクション絵文字** - 8種類（👍❤️😊🎉🔥👏✨😍）
- ✅ **コメントの返信機能（UI）** - 返信ボタン実装済み
- ✅ **リアルタイム風タイムスタンプ** - 「○分前」表示

**ファイル**: `src/components/comments/PhotoComments.tsx`

---

### 7. **アクティビティカレンダー強化版（Phase 5）** 📅
- ✅ **月表示/週表示の切り替え** - ビューモード変更
- ✅ **日付クリックで詳細モーダル** - その日のアクティビティ詳細
- ✅ **予定の表示** - 今後7日間の予定を表示
- ✅ **継続日数のストリーク表示** - 現在のストリーク、最長ストリーク
- ✅ **目標達成日のハイライト** - 🏆マークで表示
- ✅ **アクティビティレベルの色分け** - 5段階の色分け
- ✅ **90日分の履歴** - 過去3ヶ月分のデータ
- ✅ **今日のハイライト** - 紫色のドット表示

**ファイル**: `src/components/calendar/ActivityCalendarEnhanced.tsx`

---

### 8. **占い・診断機能（Phase 6）** 🔮✨

#### 8-1. デイリータロット占い
- ✅ **1日1回の制限** - 日付ベースで重複チェック
- ✅ **2つのモード** - 自分の運勢/相手との関係
- ✅ **10種類のタロットカード** - 太陽、月、星、恋人、力、正義、運命の輪、隠者、魔術師、女帝
- ✅ **カード抽選アニメーション** - 3秒間のドラマティック演出
- ✅ **メンタルチェック統合** - 占い前に5つの質問で心の状態を診断
- ✅ **運勢詳細表示** - カードの意味、アドバイス、ラッキーアイテム、ラッキーカラー
- ✅ **結果の保存** - localStorageで今日の結果を保存

**ファイル**: `src/components/fortune/DailyTarot.tsx`

**メンタルチェック質問:**
1. 今日の気分はどうですか？
2. 最近の睡眠の質はどうですか？
3. 人と話すことを楽しめていますか？
4. 好きなことや趣味を楽しめていますか？
5. 未来に希望を感じますか？

**スコアリング:**
- 0-100の範囲でスコア化
- 5段階評価（excellent 90+, good 70-89, normal 50-69, low 30-49, critical <30）
- レベル別のメッセージと改善提案

#### 8-2. 季節限定診断ハブ
- ✅ **期間限定診断** - 日付範囲でアクティブ/非アクティブを管理
- ✅ **6種類の診断** - MBTI、RPG、カラー、アニマル、フラワー、ハロウィンRPG
- ✅ **ロック/アンロック表示** - 現在利用可能な診断を視覚的に表示
- ✅ **進捗バー** - 診断の進行状況を表示
- ✅ **診断結果の保存** - 履歴として保存

**ファイル**: `src/components/fortune/SeasonalDiagnosisHub.tsx`

**実装済み診断タイプ:**
- **冬のMBTI診断 2025** (12/1-2/28) ❄️ - 4タイプ（ENFP, INTJ, ESFJ, ISTP）
- **春のRPG診断 2025** (3/1-5/31) 🌸 - 4クラス（戦士、魔法使い、ヒーラー、ローグ）
- **夏のカラー診断 2025** (6/1-8/31) 🌺 - 準備中
- **秋のアニマル診断 2025** (9/1-11/30) 🍂 - 準備中
- **新春フラワー診断 2025** (1/1-1/31) 🎍 - 準備中
- **ハロウィンRPG診断 2024** (10/15-10/31) 🎃 - 4クラス（RPG形式）

#### 8-3. メンタル統計ダッシュボード（管理画面）
- ✅ **期間選択フィルター** - 過去7日間/30日間/全期間
- ✅ **平均スコア表示** - 0-100スケール
- ✅ **トレンド分析** - 上昇中/下降中/安定
- ✅ **最高/最低スコア** - 記録の可視化
- ✅ **レベル分布グラフ** - 各レベルの出現率
- ✅ **スコア推移グラフ** - 最大30日分のバーチャート
- ✅ **チェック履歴一覧** - 日付ごとのスコアと状態
- ✅ **統計ベースのアドバイス** - データに基づく提案

**ファイル**: `src/components/fortune/MentalStatsAdmin.tsx`

**データ可視化:**
- 平均スコア、トレンド、最高/最低スコアのサマリーカード
- コンディションレベルの分布（パーセンテージ表示）
- 時系列グラフ（ホバーで詳細表示）
- 履歴リスト（日付、スコア、メッセージ）

---

## 🗂️ その他のコンポーネント

### 8. **ダッシュボード** 📊
- コミュニティ概要
- アクティビティタイムライン
- イベント管理
- メンバー管理

**ファイル**: `src/components/dashboard/`

---

### 9. **イベント管理** 📆
- イベント企画・出欠管理
- イベント企画アンケート
- イベント告知ページ作成

**ファイル**: `src/components/events/`

---

### 10. **ポートフォリオ** 🎨
- 成果物の一覧表示
- グリッドビュー/リストビュー
- フィルタリング・ソート機能

**ファイル**: `src/components/portfolio/`

---

## 💾 データ管理（localStorage）

### キー一覧
1. `cocoty_profile_v1` - プロフィールデータ
2. `cocoty_albums_v1` - アルバムデータ
3. `cocoty_current_user_v1` - 現在のログインユーザー
4. `cocoty_friend_status_v1` - 友達ステータス
5. `cocoty_privacy_settings_v1` - プライバシー設定
6. `cocoty_display_settings_v1` - 表示設定
7. `cocoty_visitor_stats_v1` - 訪問者統計
8. `cocoty_messages_v1_[userId]` - メッセージ履歴
9. `cocoty_conversations_v1` - 会話リスト
10. `cocoty_friends_list_v1` - 友達リスト
11. `cocoty_blocked_users_v1` - ブロックリスト
12. `cocoty_notifications_v1` - 通知リスト
13. `cocoty_notification_settings_v1` - 通知設定
14. `cocoty_comments_v1_[photoId]` - 写真へのコメント
15. `cocoty_likes_v1_[photoId]` - 写真へのいいね
16. `cocoty_activity_calendar_v1_[userId]` - アクティビティカレンダー
17. `cocoty_streak_v1_[userId]` - ストリーク情報
18. `cocoty_daily_tarot_v1_[userId]` - 今日のタロット結果
19. `cocoty_mental_check_v1_[userId]` - メンタルチェック結果
20. `cocoty_mental_check_v1_history_[userId]` - メンタルチェック履歴
21. `cocoty_last_draw_date_v1_[userId]` - タロット最終抽選日
22. `cocoty_seasonal_diagnosis_v1_[userId]` - 季節診断結果履歴

---

## 🎨 UI/UX特徴

### デザインシステム
- **Tailwind CSS** - ユーティリティファーストCSS
- **カラーパレット** - Purple, Pink, Blue, Greenをメインカラーに
- **アニメーション** - fade-in, scale, shadowなどのトランジション
- **レスポンシブ** - モバイル対応（一部）

### アクセス方法
- 自分のプロフィール: `http://localhost:3000/profile`
- 他人のプロフィール: `http://localhost:3000/profile?userId=user_002`
- プレビューモード: `http://localhost:3000/profile?view=preview`

---

## 🚀 技術スタック

- **Next.js 14** - App Router
- **TypeScript** - 型安全性
- **React** - UIライブラリ
- **Tailwind CSS** - スタイリング
- **Lucide React** - アイコン
- **localStorage** - データ永続化（モックAPI）

---

## 📈 今後の実装予定

### Phase 6: コンテンツ管理
- アルバム機能の強化
- 投稿エディター
- ポートフォリオ表示モード
- 外部連携（Instagram, Twitter, GitHub）

### Phase 7: プライバシー・セキュリティ
- プライバシー設定の詳細化
- ブロック・報告機能

### Phase 8: パーソナライゼーション
- プロフィールテーマのカスタマイズ
- カスタムURL（完全実装）
- プロフィールウィジェット

### Phase 9: コミュニティ連携
- 所属コミュニティの表示
- イベント参加履歴
- おすすめユーザー

### Phase 10: UX改善
- レスポンシブデザインの最適化
- 読み込みパフォーマンス向上
- アクセシビリティ対応
- エクスポート機能

### Phase 11: ゲーミフィケーション
- レベル・経験値システム
- チャレンジ・クエスト

### Phase 12: 検索・発見
- 高度な検索機能
- フィード機能

---

## 🎯 実装完了率

| カテゴリ | 完了率 | ステータス |
|---------|--------|-----------|
| Phase 1: 基本機能 | 100% | ✅ 完了 |
| Phase 2: 体験向上 | 100% | ✅ 完了 |
| Phase 3: 高度な機能 | 100% | ✅ 完了 |
| Phase 4: ソーシャル機能強化 | 100% | ✅ 完了 |
| Phase 5: アクティビティ可視化 | 100% | ✅ 完了 |
| Phase 6: 占い・診断・メンタルチェック | 100% | ✅ 完了 |
| Phase 7-12: 今後の機能 | 0% | 🔄 未着手 |

---

## 📝 メモ

- すべての機能はモックデータで動作
- 実際のバックエンドAPI連携は未実装
- localStorageを使用したクライアントサイドのデータ管理
- TypeScript型チェック完全通過
