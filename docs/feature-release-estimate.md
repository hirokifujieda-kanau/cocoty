# 機能別リリース見積もり（バックエンド + インフラ含む）

**算出日**: 2025年11月17日  
**前提条件**: 余裕を持って完成させられる工数を算出

---

## 📋 機能一覧と優先度

| # | 機能 | 優先度 | フロント実装状況 | バックエンド状況 | インフラ要否 |
|---|------|--------|----------------|----------------|------------|
| ① | タロット・パーソナル診断 | 4 | ✅ 完全実装 | ❌ 未実装 | ⭕ 必要 |
| ② | 日報・スプレッドシート連動 | 6 | ❌ 未実装 | ❌ 未実装 | ⭕ 必要 |
| ③ | 進捗系管理系（Daily） | - | ⚠️ 部分実装 | ❌ 未実装 | ⭕ 必要 |
| ④ | タスク管理系（ゴール系） | 7 | ✅ 完全実装 | ❌ 未実装 | ⭕ 必要 |
| ⑤ | チーム系の動画 | 3 | ❌ 未実装 | ❌ 未実装 | ⭕ 必要 |
| ⑥ | パンケーキタグ検索 | 7 | ⚠️ タグ表示のみ | ❌ 未実装 | ⭕ 必要 |

---

## 📊 機能①：タロット・パーソナル診断（優先度：4）

### 🎯 現在のフロント実装状況

#### ✅ 完全実装済み
1. **デイリータロット** (`DailyTarot.tsx`)
   - ✅ タロット占い実行UI
   - ✅ メンタルチェック（5問）
   - ✅ カード抽選アニメーション
   - ✅ 結果表示（カード、アドバイス、ラッキーアイテム、カラー）
   - ✅ 1日1回制限（localStorage）
   - ✅ 履歴保存（localStorage）
   - **コード規模**: 498行

2. **季節診断ハブ** (`SeasonalDiagnosisHub.tsx`)
   - ✅ MBTI診断（16タイプ）
   - ✅ RPG診断（戦士、魔法使い等）
   - ✅ カラー診断
   - ✅ 動物診断
   - ✅ フラワー診断
   - ✅ 期間限定診断の管理
   - ✅ 診断結果の保存と表示
   - **コード規模**: 350行以上

3. **メンタル統計管理** (`MentalStatsAdmin.tsx`)
   - ✅ メンタルスコアの履歴表示
   - ✅ グラフ表示（折れ線グラフ）
   - ✅ レベル分布統計
   - ✅ CSV エクスポート
   - **コード規模**: 400行以上

4. **プロフィール統合**
   - ✅ InstagramProfilePage に統合
   - ✅ Fortune タブでアクセス可能
   - ✅ 自動ポップアップ（初回/日次）

**フロント総コード量**: 約1,250行  
**データ保存**: localStorage（3種類のキー）

---

### ❌ バックエンド未実装

#### 必要なAPI（11エンドポイント）

##### タロット占い
- `POST /api/fortune/tarot` - タロット占い実行
  - Request: `{ userId, mode: 'self' | 'relationship', mentalAnswers: number[] }`
  - Response: `{ cardName, cardImage, meaning, advice, luckyItem, luckyColor, mentalResult }`
  
- `GET /api/fortune/tarot/history` - タロット履歴取得
  - Params: `userId`, `limit`, `offset`
  - Response: `{ tarotReadings: [], pagination }`
  
- `GET /api/fortune/tarot/today` - 今日のタロット取得
  - Response: `{ tarotReading | null, canDrawToday: boolean }`

##### メンタルチェック
- `POST /api/fortune/mental-check` - メンタルチェック実行
  - Request: `{ userId, answers: number[] }`
  - Response: `{ score, level, message, suggestions }`
  
- `GET /api/fortune/mental-check/history` - メンタルチェック履歴
  - Params: `userId`, `startDate`, `endDate`
  - Response: `{ mentalChecks: [], stats }`
  
- `GET /api/fortune/mental-check/stats` - 統計取得
  - Response: `{ averageScore, trend, levelDistribution }`

##### 季節診断
- `GET /api/fortune/diagnosis/available` - 利用可能な診断一覧
  - Response: `{ diagnoses: [{ id, title, type, isActive, startDate, endDate }] }`
  
- `POST /api/fortune/diagnosis/take` - 診断実行
  - Request: `{ userId, diagnosisId, answers: string[] }`
  - Response: `{ resultType, title, description, traits, advice }`
  
- `GET /api/fortune/diagnosis/history` - 診断履歴
  - Params: `userId`
  - Response: `{ diagnosisResults: [] }`
  
- `GET /api/fortune/diagnosis/result/:id` - 診断結果詳細
  - Response: `{ diagnosisResult }`

##### 管理者用
- `GET /api/admin/fortune/stats` - 全体統計
  - Response: `{ totalReadings, averageMentalScore, popularCards, diagnosisStats }`

#### データベーススキーマ（Prisma）

```prisma
// タロット占い結果
model TarotReading {
  id           String   @id @default(cuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id])
  mode         String   // 'self' | 'relationship'
  cardName     String
  cardImage    String
  cardMeaning  String
  advice       String
  luckyItem    String
  luckyColor   String
  mentalScore  Int?
  mentalLevel  String?
  createdAt    DateTime @default(now())
  
  @@index([userId, createdAt])
}

// メンタルチェック履歴
model MentalCheckHistory {
  id           String   @id @default(cuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id])
  answers      Json     // number[]
  score        Int
  level        String   // 'excellent' | 'good' | 'normal' | 'low' | 'critical'
  message      String
  suggestions  Json     // string[]
  createdAt    DateTime @default(now())
  
  @@index([userId, createdAt])
}

// 季節診断結果
model DiagnosisResult {
  id            String   @id @default(cuid())
  userId        String
  user          User     @relation(fields: [userId], references: [id])
  diagnosisId   String
  diagnosisType String   // 'mbti' | 'rpg' | 'color' | 'animal' | 'flower'
  resultType    String   // 'ENFP' | 'Warrior' | etc.
  title         String
  description   String
  traits        Json     // string[]
  advice        String
  answers       Json     // string[]
  createdAt     DateTime @default(now())
  
  @@index([userId, diagnosisId])
  @@index([diagnosisType])
}

// 診断マスター（管理者が作成）
model Diagnosis {
  id          String   @id @default(cuid())
  type        String   // 'mbti' | 'rpg' | etc.
  title       String
  description String
  icon        String
  questions   Json     // Question[]
  startDate   DateTime
  endDate     DateTime
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([type, isActive])
  @@index([startDate, endDate])
}
```

#### ビジネスロジック実装

1. **タロットカード抽選ロジック**
   - 22枚のタロットカードデータ管理
   - ランダム抽選アルゴリズム
   - メンタルスコアとの連動ロジック

2. **1日1回制限**
   - タイムゾーン対応（日本時間）
   - 日付チェック機能
   - キャッシュ戦略

3. **メンタルスコア計算**
   - 5問の回答からスコア算出（0-100）
   - レベル判定（excellent / good / normal / low / critical）
   - アドバイス生成ロジック

4. **季節診断ロジック**
   - 質問・回答のマッピング
   - 結果タイプの判定アルゴリズム
   - 期間限定診断の有効期限管理

---

### 🛠️ インフラ要件

#### 必須インフラ
1. **データベース**
   - PostgreSQL または MySQL
   - タイムゾーン対応必須
   - インデックス最適化

2. **キャッシュ**
   - Redis（診断マスターデータのキャッシュ）
   - 1日1回制限のチェック用

3. **バックグラウンドジョブ**
   - 期間限定診断の自動有効化/無効化
   - メンタルスコア統計の定期集計

4. **ストレージ**
   - 診断結果のCSVエクスポート用一時領域

---

### 📅 見積もり工数

#### フロントエンド（API連携のみ）
| タスク | 工数 | 説明 |
|--------|------|------|
| localStorage → API切り替え | 8h | 3コンポーネントのAPI統合 |
| エラーハンドリング | 4h | ネットワークエラー、リトライ処理 |
| ローディング状態の実装 | 2h | スケルトンUI、スピナー |
| **フロント合計** | **14h** | **約2日** |

#### バックエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| データベース設計 | 4h | 4テーブルのスキーマ設計 |
| Prisma マイグレーション | 2h | スキーマ作成、初期データ投入 |
| タロット API 実装 | 12h | 3エンドポイント + ロジック |
| メンタルチェック API 実装 | 10h | 3エンドポイント + スコア計算 |
| 季節診断 API 実装 | 16h | 5エンドポイント + 診断ロジック |
| 1日1回制限ロジック | 6h | タイムゾーン対応、Redis統合 |
| 統計集計機能 | 8h | 管理者用統計API |
| バックグラウンドジョブ | 6h | 診断有効期限管理 |
| テスト実装 | 16h | ユニット + 統合テスト |
| **バックエンド合計** | **80h** | **約10日** |

#### インフラ
| タスク | 工数 | 説明 |
|--------|------|------|
| Redis セットアップ | 4h | ローカル + 本番環境 |
| DB インデックス最適化 | 3h | クエリパフォーマンス調整 |
| バックグラウンドジョブ設定 | 4h | Cron or Sidekiq設定 |
| モニタリング設定 | 3h | ログ、アラート |
| **インフラ合計** | **14h** | **約2日** |

#### デプロイ・QA
| タスク | 工数 | 説明 |
|--------|------|------|
| ステージング環境テスト | 8h | 動作確認、負荷テスト |
| 本番デプロイ | 4h | デプロイ、監視 |
| バグ修正バッファ | 12h | 想定外の問題対応 |
| **デプロイ・QA合計** | **24h** | **約3日** |

---

### 📊 総工数サマリー（機能①）

| カテゴリ | 工数 | 期間 |
|---------|------|------|
| フロントエンド | 14h | 2日 |
| バックエンド | 80h | 10日 |
| インフラ | 14h | 2日 |
| デプロイ・QA | 24h | 3日 |
| **合計** | **132h** | **約3週間** |

**余裕を持った見積もり**: **4週間（1ヶ月）**

---

## 📊 機能②：日報・スプレッドシート連動（優先度：6）

### 🎯 現在の実装状況

#### ❌ フロント未実装
- 日報作成UI: 未実装
- 日報一覧表示: 未実装
- スプレッドシート連動: 未実装

#### ❌ バックエンド未実装

---

### 🔍 実装範囲

#### 必要な機能
1. **日報作成機能**
   - テキストエディタ（Markdown対応）
   - 画像添付
   - タグ付け
   - 下書き保存
   - 公開設定（公開/限定公開/非公開）

2. **日報一覧・検索**
   - カレンダービュー
   - リストビュー
   - 期間フィルター
   - タグ検索
   - メンバー検索

3. **Google Spreadsheet連動**
   - Google Sheets API 統合
   - 日報データの自動同期
   - スプレッドシート形式設定
   - 同期スケジュール設定

4. **統計・分析**
   - 提出率の可視化
   - 継続日数カウント
   - 活動統計（投稿数、文字数、画像数）

---

### 📅 見積もり工数

#### フロントエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| 日報作成UI | 16h | Markdown エディタ、画像アップロード |
| 日報一覧UI | 12h | カレンダー、リスト、検索 |
| スプレッドシート設定UI | 8h | Google認証、設定画面 |
| 統計ダッシュボード | 10h | グラフ、チャート表示 |
| **フロント合計** | **46h** | **約6日** |

#### バックエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| データベース設計 | 4h | 日報テーブル設計 |
| 日報CRUD API | 12h | 作成、更新、削除、一覧 |
| 画像アップロード | 8h | S3連携、サムネイル生成 |
| Google Sheets API 統合 | 24h | 認証、データ同期ロジック |
| 同期ジョブ実装 | 12h | バックグラウンドジョブ |
| 検索機能実装 | 8h | 全文検索、フィルター |
| 統計API | 10h | 集計クエリ、キャッシュ |
| テスト実装 | 16h | ユニット + 統合テスト |
| **バックエンド合計** | **94h** | **約12日** |

#### インフラ
| タスク | 工数 | 説明 |
|--------|------|------|
| S3バケット設定 | 3h | 画像保存用 |
| Google API 設定 | 4h | OAuth、サービスアカウント |
| 全文検索エンジン | 6h | Elasticsearch or PostgreSQL FTS |
| バックグラウンドジョブ | 4h | 同期ジョブのスケジューリング |
| **インフラ合計** | **17h** | **約2日** |

#### デプロイ・QA
| タスク | 工数 | 説明 |
|--------|------|------|
| ステージング環境テスト | 12h | 動作確認、同期テスト |
| 本番デプロイ | 4h | デプロイ、監視 |
| バグ修正バッファ | 16h | 想定外の問題対応 |
| **デプロイ・QA合計** | **32h** | **約4日** |

---

### 📊 総工数サマリー（機能②）

| カテゴリ | 工数 | 期間 |
|---------|------|------|
| フロントエンド | 46h | 6日 |
| バックエンド | 94h | 12日 |
| インフラ | 17h | 2日 |
| デプロイ・QA | 32h | 4日 |
| **合計** | **189h** | **約4週間** |

**余裕を持った見積もり**: **5-6週間（1.5ヶ月）**

---

## 📊 機能③：進捗系管理系（Daily）

### 🎯 現在の実装状況

#### ⚠️ フロント部分実装
- タスク管理機能: ✅ 実装済み（`MemberLearningProgress.tsx`, `AdminLearningDashboard.tsx`）
- Dailyベースの進捗管理: ❌ 未実装
- **コード規模**: 約800行（タスク管理）

**既存実装**:
- 学習タスクの作成・編集・削除
- タスクステータス管理（未着手/進行中/完了/期限切れ）
- 進捗率表示
- 期限管理

**不足機能**:
- ❌ Dailyルーチンの設定
- ❌ 日次チェックイン機能
- ❌ 継続日数カウント
- ❌ Dailyハビット管理

---

### 🔍 追加実装範囲

#### 必要な機能
1. **Dailyルーチン設定**
   - 毎日実行するタスクの登録
   - 曜日指定（平日のみ、週末のみ等）
   - 時間指定
   - 通知設定

2. **日次チェックイン**
   - 1日の振り返り入力
   - 今日のハイライト
   - 明日の目標
   - 気分スコア

3. **継続管理**
   - 連続達成日数（ストリーク）
   - 達成率の可視化
   - バッジ・実績システム

4. **リマインダー機能**
   - プッシュ通知
   - メール通知
   - Slack連携（オプション）

---

### 📅 見積もり工数

#### フロントエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| Dailyルーチン設定UI | 12h | ルーチン登録、編集、削除 |
| 日次チェックインUI | 10h | 振り返り入力、スコア |
| 継続管理ダッシュボード | 12h | ストリーク表示、グラフ |
| 通知設定UI | 6h | 通知設定画面 |
| **フロント合計** | **40h** | **約5日** |

#### バックエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| データベース拡張 | 4h | Dailyルーチンテーブル設計 |
| Dailyルーチン API | 12h | CRUD + 繰り返しロジック |
| チェックイン API | 8h | 日次記録の保存・取得 |
| 継続日数計算ロジック | 8h | ストリーク計算アルゴリズム |
| 通知システム | 16h | プッシュ通知、メール送信 |
| リマインダージョブ | 10h | 定期実行ジョブ |
| テスト実装 | 12h | ユニット + 統合テスト |
| **バックエンド合計** | **70h** | **約9日** |

#### インフラ
| タスク | 工数 | 説明 |
|--------|------|------|
| プッシュ通知設定 | 6h | Firebase Cloud Messaging |
| メール送信設定 | 4h | SendGrid or SES |
| ジョブスケジューラー | 3h | Cron設定 |
| **インフラ合計** | **13h** | **約2日** |

#### デプロイ・QA
| タスク | 工数 | 説明 |
|--------|------|------|
| ステージング環境テスト | 10h | 動作確認、通知テスト |
| 本番デプロイ | 4h | デプロイ、監視 |
| バグ修正バッファ | 12h | 想定外の問題対応 |
| **デプロイ・QA合計** | **26h** | **約3日** |

---

### 📊 総工数サマリー（機能③）

| カテゴリ | 工数 | 期間 |
|---------|------|------|
| フロントエンド | 40h | 5日 |
| バックエンド | 70h | 9日 |
| インフラ | 13h | 2日 |
| デプロイ・QA | 26h | 3日 |
| **合計** | **149h** | **約3週間** |

**余裕を持った見積もり**: **4週間（1ヶ月）**

---

## 📊 機能④：タスク管理系（ゴール系）（優先度：7）

### 🎯 現在の実装状況

#### ✅ フロント完全実装
1. **メンバー学習進捗** (`MemberLearningProgress.tsx`)
   - ✅ タスク一覧表示
   - ✅ タスク作成・編集・削除
   - ✅ ステータス管理（未着手/進行中/完了/期限切れ）
   - ✅ 進捗率表示（0-100%）
   - ✅ 優先度設定（高/中/低）
   - ✅ カテゴリ分類（動画学習/課題/イベント/練習/その他）
   - ✅ 期限設定
   - ✅ フィルター・検索機能
   - **コード規模**: 498行

2. **管理者学習ダッシュボード** (`AdminLearningDashboard.tsx`)
   - ✅ 全ユーザーのタスク一覧
   - ✅ ユーザー別統計
   - ✅ タスク統計（総数、完了、進行中、期限切れ）
   - ✅ 完了率の可視化
   - ✅ ユーザー検索
   - **コード規模**: 498行

3. **データ管理** (`mockLearningTasks.ts`)
   - ✅ localStorage でのタスク保存
   - ✅ タスク CRUD 操作
   - ✅ 統計計算関数
   - **コード規模**: 330行

**フロント総コード量**: 約1,326行

---

### ❌ バックエンド未実装

#### 必要なAPI（13エンドポイント）

##### タスク管理
- `GET /api/tasks` - タスク一覧取得
  - Params: `userId`, `status`, `category`, `page`, `limit`
  - Response: `{ tasks: [], pagination }`

- `GET /api/tasks/:id` - タスク詳細取得
  - Response: `{ task }`

- `POST /api/tasks` - タスク作成
  - Request: `{ title, description, category, priority, dueDate, userId }`
  - Response: `{ task }`

- `PUT /api/tasks/:id` - タスク更新
  - Request: `{ title?, description?, status?, progress?, ... }`
  - Response: `{ task }`

- `DELETE /api/tasks/:id` - タスク削除
  - Response: `{ success: true }`

- `PUT /api/tasks/:id/progress` - 進捗更新
  - Request: `{ progress, timeSpent? }`
  - Response: `{ task }`

- `PUT /api/tasks/:id/complete` - タスク完了
  - Response: `{ task }`

##### 統計
- `GET /api/tasks/stats` - ユーザー別統計
  - Params: `userId`
  - Response: `{ total, completed, inProgress, overdue, completionRate }`

- `GET /api/tasks/upcoming` - 期限が近いタスク
  - Params: `userId`, `days` (デフォルト: 7)
  - Response: `{ tasks: [] }`

- `GET /api/tasks/overdue` - 期限切れタスク
  - Params: `userId`
  - Response: `{ tasks: [] }`

##### 管理者用
- `GET /api/admin/tasks` - 全タスク取得
  - Params: `page`, `limit`, `userId?`, `status?`
  - Response: `{ tasks: [], pagination }`

- `GET /api/admin/tasks/stats` - 全体統計
  - Response: `{ totalTasks, totalUsers, avgCompletionRate, userStats: {} }`

- `POST /api/admin/tasks/assign` - タスク割り当て
  - Request: `{ taskId, userId }`
  - Response: `{ task }`

---

#### データベーススキーマ（Prisma）

```prisma
model LearningTask {
  id           String   @id @default(cuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id])
  title        String
  description  String
  category     String   // 'video-learning' | 'assignment' | 'event' | 'practice' | 'other'
  priority     String   // 'high' | 'medium' | 'low'
  status       String   @default("not-started") // 'not-started' | 'in-progress' | 'completed' | 'overdue'
  progress     Int      @default(0) // 0-100
  dueDate      DateTime?
  completedAt  DateTime?
  timeSpent    Int      @default(0) // 分単位
  tags         String[] // タグ配列
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  @@index([userId, status])
  @@index([userId, dueDate])
  @@index([category])
}

// タスクテンプレート（管理者が作成）
model TaskTemplate {
  id          String   @id @default(cuid())
  title       String
  description String
  category    String
  priority    String
  tags        String[]
  createdBy   String
  creator     User     @relation(fields: [createdBy], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

---

#### ビジネスロジック実装

1. **タスクステータス自動更新**
   - 期限切れの自動検出
   - 進捗100%で自動完了

2. **統計計算**
   - ユーザー別完了率
   - カテゴリ別集計
   - 期限切れカウント

3. **通知**
   - 期限3日前の通知
   - 期限当日の通知
   - 期限切れ通知

4. **タスクテンプレート**
   - よく使うタスクのテンプレート化
   - 一括タスク作成

---

### 📅 見積もり工数

#### フロントエンド（API連携のみ）
| タスク | 工数 | 説明 |
|--------|------|------|
| localStorage → API切り替え | 12h | 2コンポーネント + データレイヤー |
| エラーハンドリング | 4h | ネットワークエラー、リトライ |
| ローディング状態 | 2h | スケルトンUI |
| リアルタイム更新 | 6h | WebSocket or polling |
| **フロント合計** | **24h** | **約3日** |

#### バックエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| データベース設計 | 3h | 2テーブルのスキーマ設計 |
| Prisma マイグレーション | 2h | スキーマ作成 |
| タスクCRUD API | 16h | 7エンドポイント実装 |
| 統計API | 10h | 3エンドポイント + 集計ロジック |
| 管理者API | 8h | 3エンドポイント実装 |
| ステータス自動更新ジョブ | 6h | 期限切れチェック |
| 通知システム | 12h | 期限通知の実装 |
| テンプレート機能 | 8h | CRUD + 適用ロジック |
| テスト実装 | 16h | ユニット + 統合テスト |
| **バックエンド合計** | **81h** | **約10日** |

#### インフラ
| タスク | 工数 | 説明 |
|--------|------|------|
| バックグラウンドジョブ | 4h | Cron設定 |
| 通知インフラ | 6h | Push通知、メール |
| DB インデックス最適化 | 3h | クエリパフォーマンス |
| **インフラ合計** | **13h** | **約2日** |

#### デプロイ・QA
| タスク | 工数 | 説明 |
|--------|------|------|
| ステージング環境テスト | 10h | 動作確認、負荷テスト |
| 本番デプロイ | 4h | デプロイ、監視 |
| バグ修正バッファ | 12h | 想定外の問題対応 |
| **デプロイ・QA合計** | **26h** | **約3日** |

---

### 📊 総工数サマリー（機能④）

| カテゴリ | 工数 | 期間 |
|---------|------|------|
| フロントエンド | 24h | 3日 |
| バックエンド | 81h | 10日 |
| インフラ | 13h | 2日 |
| デプロイ・QA | 26h | 3日 |
| **合計** | **144h** | **約3週間** |

**余裕を持った見積もり**: **4週間（1ヶ月）**

---

## 📊 機能⑤：チーム系の動画（優先度：3）

### 🎯 現在の実装状況

#### ❌ フロント未実装
- 動画アップロードUI: 未実装
- 動画プレイヤー: 未実装
- 動画一覧: 未実装

#### ❌ バックエンド未実装

---

### 🔍 実装範囲

#### 必要な機能
1. **動画アップロード**
   - ファイル選択UI
   - アップロード進捗表示
   - サムネイル自動生成
   - メタデータ入力（タイトル、説明、タグ）
   - 公開設定

2. **動画プレイヤー**
   - HLS/DASH対応
   - 再生コントロール
   - 画質切り替え
   - 再生速度変更
   - 全画面表示

3. **動画一覧・検索**
   - グリッド表示
   - フィルター（チーム、タグ、日付）
   - 検索機能
   - ソート機能

4. **動画管理**
   - 編集（メタデータ）
   - 削除
   - 公開/非公開切り替え
   - 視聴統計

---

### 📅 見積もり工数

#### フロントエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| 動画アップロードUI | 16h | ドラッグ&ドロップ、進捗表示 |
| 動画プレイヤー実装 | 20h | カスタムコントロール、HLS対応 |
| 動画一覧UI | 12h | グリッド、フィルター、検索 |
| 動画管理UI | 8h | 編集、削除UI |
| **フロント合計** | **56h** | **約7日** |

#### バックエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| データベース設計 | 4h | 動画テーブル設計 |
| 動画アップロードAPI | 16h | マルチパートアップロード |
| 動画エンコーディング | 24h | FFmpeg統合、HLS生成 |
| サムネイル生成 | 8h | 動画からサムネイル抽出 |
| 動画CRUD API | 12h | 取得、更新、削除 |
| 検索API | 8h | 全文検索、フィルター |
| 視聴統計API | 10h | 視聴回数、時間の記録 |
| テスト実装 | 16h | ユニット + 統合テスト |
| **バックエンド合計** | **98h** | **約12日** |

#### インフラ
| タスク | 工数 | 説明 |
|--------|------|------|
| S3バケット設定 | 3h | 動画保存用 |
| CloudFront CDN設定 | 6h | 動画配信最適化 |
| エンコーディングジョブ | 8h | AWS MediaConvert or FFmpeg |
| ストレージ容量管理 | 4h | ライフサイクルポリシー |
| **インフラ合計** | **21h** | **約3日** |

#### デプロイ・QA
| タスク | 工数 | 説明 |
|--------|------|------|
| ステージング環境テスト | 16h | アップロード、再生テスト |
| 本番デプロイ | 6h | デプロイ、監視 |
| バグ修正バッファ | 16h | 想定外の問題対応 |
| **デプロイ・QA合計** | **38h** | **約5日** |

---

### 📊 総工数サマリー（機能⑤）

| カテゴリ | 工数 | 期間 |
|---------|------|------|
| フロントエンド | 56h | 7日 |
| バックエンド | 98h | 12日 |
| インフラ | 21h | 3日 |
| デプロイ・QA | 38h | 5日 |
| **合計** | **213h** | **約5週間** |

**余裕を持った見積もり**: **6-7週間（1.5-2ヶ月）**

---

## 📊 機能⑥：パンケーキタグ検索（優先度：7）

### 🎯 現在の実装状況

#### ⚠️ フロント部分実装
- タグ表示: ✅ 実装済み（Portfolio, SocialGallery, Events等）
- タグ検索: ❌ 未実装
- 類似プロフィール検索: ❌ 未実装

**既存実装**:
- 投稿・イベント・作品にタグ表示
- タグデータ構造（配列）
- タグによる基本フィルター

**不足機能**:
- ❌ 共通タグマスターデータ
- ❌ タグによるユーザー検索
- ❌ 類似プロフィールレコメンド
- ❌ タグクラウド表示

---

### 🔍 実装範囲

#### 必要な機能
1. **共通タグシステム**
   - タグマスターデータ管理
   - カテゴリ別タグ分類
   - タグサジェスト機能
   - タグ使用頻度集計

2. **タグ検索機能**
   - タグによるプロフィール検索
   - 複数タグでのAND/OR検索
   - タグクラウド表示
   - 人気タグランキング

3. **類似プロフィール検索**
   - タグマッチング度計算
   - 類似度スコアリング
   - レコメンドアルゴリズム
   - 類似ユーザー一覧表示

4. **タグ管理**
   - タグ作成・編集・削除（管理者）
   - タグマージ機能
   - タグ階層構造（カテゴリ）

---

### 📅 見積もり工数

#### フロントエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| タグ選択UI | 12h | サジェスト、マルチ選択 |
| タグ検索UI | 10h | 検索フォーム、フィルター |
| 類似プロフィール表示 | 12h | ユーザーカード、スコア表示 |
| タグクラウドUI | 6h | ビジュアル表示 |
| タグ管理UI（管理者） | 10h | CRUD、マージ機能 |
| **フロント合計** | **50h** | **約6日** |

#### バックエンド
| タスク | 工数 | 説明 |
|--------|------|------|
| データベース設計 | 4h | タグテーブル、ユーザータグ関連 |
| タグマスターCRUD | 10h | タグ管理API |
| タグサジェストAPI | 8h | 部分一致検索 |
| タグ検索API | 12h | ユーザー検索ロジック |
| 類似度計算アルゴリズム | 16h | Jaccard係数、TF-IDF等 |
| レコメンドAPI | 12h | 類似ユーザー取得 |
| タグ統計API | 8h | 使用頻度、ランキング |
| タグマージ機能 | 6h | 重複タグの統合 |
| テスト実装 | 14h | ユニット + 統合テスト |
| **バックエンド合計** | **90h** | **約11日** |

#### インフラ
| タスク | 工数 | 説明 |
|--------|------|------|
| 全文検索エンジン | 8h | Elasticsearch統合 |
| キャッシュ設定 | 4h | タグマスター、ランキング |
| DB インデックス最適化 | 4h | タグ検索パフォーマンス |
| **インフラ合計** | **16h** | **約2日** |

#### デプロイ・QA
| タスク | 工数 | 説明 |
|--------|------|------|
| ステージング環境テスト | 12h | 検索精度、パフォーマンステスト |
| 本番デプロイ | 4h | デプロイ、監視 |
| バグ修正バッファ | 12h | 想定外の問題対応 |
| **デプロイ・QA合計** | **28h** | **約4日** |

---

### 📊 総工数サマリー（機能⑥）

| カテゴリ | 工数 | 期間 |
|---------|------|------|
| フロントエンド | 50h | 6日 |
| バックエンド | 90h | 11日 |
| インフラ | 16h | 2日 |
| デプロイ・QA | 28h | 4日 |
| **合計** | **184h** | **約4週間** |

**余裕を持った見積もり**: **5週間（1.2ヶ月）**

---

## 📊 全体サマリー

### 総工数一覧

| 機能 | 優先度 | フロント工数 | バックエンド工数 | インフラ工数 | QA工数 | 合計工数 | 見積期間 |
|------|--------|------------|----------------|------------|--------|---------|---------|
| ① タロット・診断 | 4 | 14h | 80h | 14h | 24h | **132h** | 4週間 |
| ② 日報・スプシ | 6 | 46h | 94h | 17h | 32h | **189h** | 5-6週間 |
| ③ 進捗管理（Daily） | - | 40h | 70h | 13h | 26h | **149h** | 4週間 |
| ④ タスク管理 | 7 | 24h | 81h | 13h | 26h | **144h** | 4週間 |
| ⑤ チーム動画 | 3 | 56h | 98h | 21h | 38h | **213h** | 6-7週間 |
| ⑥ タグ検索 | 7 | 50h | 90h | 16h | 28h | **184h** | 5週間 |
| **合計** | - | **230h** | **513h** | **94h** | **174h** | **1,011h** | **約6ヶ月** |

---

### 推奨実装順序（優先度ベース）

#### Phase 1: 高優先度機能（約2.5ヶ月）
1. **タロット・診断**（優先度4） - 4週間
2. **タスク管理**（優先度7） - 4週間
3. **タグ検索**（優先度7） - 5週間

**Phase 1 合計**: 460h（約13週間 ≈ 3ヶ月）

---

#### Phase 2: 中優先度機能（約2.5ヶ月）
4. **進捗管理（Daily）** - 4週間
5. **日報・スプシ**（優先度6） - 5-6週間

**Phase 2 合計**: 338h（約8-9週間 ≈ 2ヶ月）

---

#### Phase 3: 低優先度機能（約1.5ヶ月）
6. **チーム動画**（優先度3） - 6-7週間

**Phase 3 合計**: 213h（約6-7週間 ≈ 1.5ヶ月）

---

### 📈 累積工数グラフ

```
Phase 1 (3ヶ月):  460h ████████████████████░░░░░░░░░░░░░░░░░░░░
Phase 2 (2ヶ月):  338h ██████████████░░░░░░░░░░░░░░░░░░░░░░░░░░
Phase 3 (1.5ヶ月): 213h ████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
                  ────────────────────────────────────────────
合計:            1,011h (約6ヶ月)
```

---

## 🎯 結論

### 全機能リリースまでの期間

**最短**: 6ヶ月（並行開発なし、単一開発者想定）  
**推奨**: **8-10ヶ月**（余裕を持った開発、テスト、バグ修正含む）

### 優先度順での段階リリース

- **Phase 1（3ヶ月）**: タロット・診断 + タスク管理 + タグ検索
- **Phase 2（2ヶ月）**: 進捗管理 + 日報システム
- **Phase 3（1.5ヶ月）**: チーム動画機能

### 開発リソース

**1名の場合**: 約10ヶ月  
**2名の場合**: 約5-6ヶ月  
**3名の場合**: 約4ヶ月

---

## 📝 補足事項

### インフラコスト概算

- **データベース**: $20-50/月（PostgreSQL）
- **ストレージ**: $10-30/月（S3）
- **CDN**: $20-100/月（CloudFront）
- **通知**: $10-20/月（Firebase/SendGrid）
- **動画エンコーディング**: $50-200/月（AWS MediaConvert）

**月額合計**: $110-400/月

### 技術スタック推奨

- **バックエンド**: Next.js API Routes or NestJS
- **データベース**: PostgreSQL + Prisma
- **キャッシュ**: Redis
- **ストレージ**: AWS S3
- **CDN**: CloudFront
- **認証**: NextAuth.js or Supabase
- **通知**: Firebase Cloud Messaging
- **メール**: SendGrid
- **動画**: AWS MediaConvert or FFmpeg
